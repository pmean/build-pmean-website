---
title: "Building html pages from bibtex"
author: "Steve Simon"
output: html_document
---

This program was written in R Markdown by Steve Simon. It was created on 2019-06-11 and last updated on `r Sys.Date()`.

```{r echo=FALSE}
source(file="prelims.R", echo=FALSE)
suppressMessages(suppressWarnings(library(tidyverse)))
knitr::opts_chunk$set(echo=FALSE)
verbose <- TRUE
```

```{r read-bib}
bib_path <- "../data/19/06"
bib_files <- list.files(path=bib_path, pattern="*.bib")
bib_count <- length(bib_files)
txt_original <- as.list(1:bib_count)
bib_dates <- rep("1999-09-09", bib_count)
for (i in 1:bib_count) {
  txt_original[[i]] <- readLines(paste0(bib_path, "/", bib_files[i]))
  bib_dates[i] <- select_txt(txt_original[[i]], "urldate")
}
if (verbose) print(bib_dates)
o <- rev(order(bib_dates))
bib_dates <- bib_dates[o]
bib_files <- bib_files[o]
txt_full <- as.list(1:bib_count)
for (i in 1:bib_count) {
  txt_full[[i]] <- txt_original[[o[i]]]
}
```

```{r build-pages}
md_path <- "../md"
build_index_page(bib_files)
build_individual_pages(bib_files)
```

```{r render-files}
web_path <- "../website"
file_list <- list.files(path=md_path, pattern="*.Rmd", full.names=TRUE)
for (f in file_list) {
  render(f, output_dir=web_path)
}
```

```{r build-citation}

divider <- paste0(rep("=", 50), collapse="")
```

